<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="tr">

<head th:replace="~{fragments/head :: head('Profilim - ' + ${user.name})}"></head>

<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container my-5">
        <div class="row g-5">
            

            <!-- Profil Kartı -->
            <div class="col-lg-4">
            <br>
            <br>
            <br>
            <br>
                <div class="card shadow border-0 text-center">
                    <img src="data:image/png;base64,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" class="card-img-top"
                        alt="Profil" style="height:350px; object-fit:cover;">
                    <div class="card-body">
                        <h3 class="fw-bold" th:text="${user.name}">Ahmet</h3>
                        <p class="text-muted" th:text="${user.email}">ahmet@example.com</p>
                        <hr>
                        <p class="text-secondary">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Üye olduğu tarih:
                            <!-- BURAYI SENİN USER SINIFINA GÖRE DEĞİŞTİR -->
                            <strong th:text="${#temporals.format(user.createdAt, 'dd MMMM yyyy', T(java.util.Locale).forLanguageTag('tr-TR'))}">01 Ocak 2025
                                
                            </strong>
                        </p>
                        <div class="alert alert-info">
                            <strong th:text="${#lists.size(userReviews)}">0</strong> yorum yaptı
                        </div>
                    </div>
                </div>
            </div>

            <!-- Yorumlar -->
            <div class="col-lg-8">
                <h2 class="mb-4">Yorumlarım</h2>

                <div th:each="r : ${userReviews}" class="card mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h5>
                                    <a th:href="@{/books/{id}(id=${r.book.id})}" th:text="${r.book.title}"
                                        class="text-decoration-none">
                                        Kitap Adı
                                    </a>
                                </h5>
                                <small class="text-muted" 
                                      th:text="${#temporals.format(r.createdAt, 'dd.MM.yyyy HH:mm')}">
                                    15.11.2024 14:30
                                </small>
                            </div>
                            <div class="text-warning fs-4">
                                <span th:switch="${r.rating}">
                                    <span th:case="5">★★★★★</span>
                                    <span th:case="4">★★★★☆</span>
                                    <span th:case="3">★★★☆☆</span>
                                    <span th:case="2">★★☆☆☆</span>
                                    <span th:case="1">★☆☆☆☆</span>
                                </span>
                            </div>
                        </div>
                        <p class="mt-3" th:text="${r.comment}">Harika bir kitap!</p>
                    </div>
                </div>

                <div th:if="${#lists.isEmpty(userReviews)}" class="text-center py-5 bg-light rounded">
                    <h4 class="text-muted">Henüz yorum yapmadın</h4>
                    <p>Bir kitaba yorum yazarak başla!</p>
                    <a href="/" class="btn btn-primary">Kitaplara Git</a>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{fragments/footer :: footer}"></div>
    <div th:replace="~{fragments/sepet :: sepetModal}"></div>
    <div th:replace="~{fragments/scripts :: scripts}"></div>
</body>
</html>